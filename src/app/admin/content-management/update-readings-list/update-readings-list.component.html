<div *ngIf="!readingsData && dateString">
  <ul class="collection with-header">
    <li class="collection-header"><h5>No readings yet for {{dateString | amDateFormat: 'LL'}}</h5></li>
  </ul>
</div>

<div *ngIf="readingsData">
  <ul class="collection with-header">
    <li class="collection-header"><h5>Readings for {{dateString | amDateFormat: 'LL'}}</h5></li>
    <li *ngFor="let reading of readingsData.readings; let rIndex=index" class="collection-item grey lighten-5">
      <span class="title"> {{reading.stdRef}}</span>
      <span class="right action-icons">
        <a
          href="javascript:void(0)"
          (click)="displayReading(rIndex)"
          class="grey-text text-darken-2">
        <i class="material-icons lr-arrow">pageview</i>
        </a>
        <a
          href="javascript:void(0)"
          (click)="displayDeleteReadingModal(reading)"
          class="grey-text text-darken-2">
        <i class="material-icons lr-arrow">delete_forever</i>
        </a>
        <a
          href="javascript:void(0)"
          (click)="launchEditReadingModal(reading)"
          class="grey-text text-darken-2">
        <i class="material-icons lr-arrow">edit</i>
        </a>
      </span>
      <ul *ngIf="reading.applications.length" class="collection">
        <li *ngFor="let application of reading.applications; let aIndex=index" class="collection-item white">
          <app-display-application-steps
            [readingIndex] = "rIndex"
            [applicationIndex] = "aIndex"
            [application] = "application"
            (deleteApplication)="displayDeleteApplicationModal($event)"
            (editApplication)="launchEditPracticeModal($event)">
          </app-display-application-steps>
        </li>

      </ul>

      <div *ngIf="!reading.applications.length">
        <p></p>
      </div>

      <a class="waves-effect waves-light btn secondary-content" (click)="launchNewPracticeModal(rIndex)">Add Practice</a>
      <p>
        <br>
      </p>

    </li>
  </ul>
</div>
<div class="row">
  <div class="col s12 center-align btn-space">
    <a class="waves-effect waves-light btn" (click)="launchNewReadingModal()">Add Reading</a>
  </div>
</div>

<update-practice-form
  #updateApplicationModal
  [incrementer] = "incrementer"
  [readingDay] = "readingsData"
  [readingIndex] = "readingIndex"
  [applicationIndex] = "applicationIndex"
  [isNewApplication] = "isNewApplication"
  [allPractices] = "allPractices">
</update-practice-form>

<app-display-reading-modal
  #displayReadingModal
  [reading]="singleReading">
</app-display-reading-modal>

<app-delete-item-modal
  #deleteReadingModal
  [header]="'Delete Reading: '+singleReadingStdRef"
  [message]="'Are you sure you want to delete this reading and all of associated practices and steps?  This action is not reversible.'"
  (deleteItem)="onDeleteReading($event)">
</app-delete-item-modal>

<app-delete-item-modal
  #deleteApplicationModal
  [header]="'Delete Practice: '+singleApplicationTitle"
  [message]="'Are you sure you want to delete this practice and all of associated steps?  This action is not reversible.'"
  (deleteItem)="onDeleteApplication($event)">
</app-delete-item-modal>

<app-update-reading-form
  #updateReadingModal
  [incrementer] = "incrementer"
  [reading] = "singleReading"
  (submitSuccess) = "onAddReading($event)">
</app-update-reading-form>
